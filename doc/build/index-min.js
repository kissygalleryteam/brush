/*! brush - v2.0.0 - 2013-09-14 2:37:49 PM
* Copyright (c) 2013 kissy-team; Licensed  */
KISSY.add("kg/brush/2.0.0/painting/map",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}return d.all,a.augment(e,a.EventTarget,{_init:function(a,b){console.log(a),a.config.mapNode.css({position:"relative"});for(k in b)a.config.mapNode.css(k,b[k]);if(a.ifSVG){var c='<svg width="'+b.width+'" height="'+b.height+'" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>';a.config.mapNode.append(c)}else{document.namespaces.v||document.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=document.createStyleSheet();d.addRule("v\\:roundrect","behavior: url(#default#VML);display:inline-block;"),d.addRule("v\\:polyLine","behavior: url(#default#VML);display:inline-block;"),d.addRule("v\\:rect","behavior: url(#default#VML);display:inline-block;"),d.addRule("v\\:oval","behavior: url(#default#VML);display:inline-block;"),d.addRule("v\\:shape","behavior: url(#default#VML);display:inline-block;");var c='<div style="width:'+b.width+"px; height:"+b.height+'px;"></div>';a.config.mapNode.append(c)}}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/painting/circle",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}var f=d.all,g={top:-9999,left:-9999,right:-9999,bottom:-9999,width:0,height:0,backgroundColor:"transparent",borderWidth:0,borderColor:"transparent"};return a.augment(e,a.EventTarget,{_init:function(b,c){var d=this,c=a.merge(g,c);0==c.width&&0!=c.height&&(c.width=c.height);var e=d._readConfig(b,c);if(b.ifSVG){var h=document.createElementNS("http://www.w3.org/2000/svg","circle");f(h).attr("cx",e.x).attr("cy",e.y).attr("r",c.width/2).attr("stroke",c.borderColor).attr("stroke-width",c.borderWidth).attr("fill",c.backgroundColor),b.config.mapNode.append(h),d.thisNode=f(h)}else{var i=document.createElement("v:roundrect");f(i).attr("arcsize",c.width).attr("stroked",!0).attr("strokecolor",c.borderColor).attr("strokeweight",.8*c.borderWidth).attr("fillcolor",c.backgroundColor).css({position:"absolute",top:e.y-c.width/2,left:e.x-c.width/2,width:c.width,height:c.width,antialias:!0}),b.config.mapNode.append(i),d.thisNode=f(i)}},_readConfig:function(a,b){var c,d,e=a.config.mapNode.width(),f=a.config.mapNode.height();return-9999!=b.top&&-9999!=b.left?(c=b.left+b.width/2,d=b.top+b.width/2):-9999!=b.top&&-9999!=b.right?(c=e-b.right-b.width/2,d=b.top+b.width/2):-9999!=b.bottom&&-9999!=b.left?(c=b.left+b.width/2,d=f-b.bottom-b.width/2):-9999!=b.bottom&&-9999!=b.right&&(c=e-b.right-b.width/2,d=f-b.bottom-b.width/2),{x:c,y:d}}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/painting/line",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}var f=d.all,g={points:"",borderWidth:0,borderColor:"transparent"};return a.augment(e,a.EventTarget,{_init:function(b,c){var d=this,c=a.merge(g,c),e=d._readConfig(b,c);if(b.ifSVG){var h=document.createElementNS("http://www.w3.org/2000/svg","line");f(h).attr("x1",e.x1).attr("y1",e.y1).attr("x2",e.x2).attr("y2",e.y2).attr("stroke",c.borderColor).attr("stroke-width",c.borderWidth),b.config.mapNode.append(h),d.thisNode=f(h)}else{var i=document.createElement("v:polyLine");f(i).attr("points",c.points).attr("filled",!0).attr("strokeweight",.8*c.borderWidth).attr("strokecolor",c.borderColor).css({position:"absolute",top:0,left:0}),b.config.mapNode.append(i),d.thisNode=f(i)}},_readConfig:function(a,b){var c=b.points.split(" ");return{x1:c[0].split(",")[0],y1:c[0].split(",")[1],x2:c[1].split(",")[0],y2:c[1].split(",")[1]}}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/painting/rect",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}var f=d.all,g={top:-9999,left:-9999,right:-9999,bottom:-9999,width:0,height:0,backgroundColor:"transparent",borderWidth:0,borderColor:"transparent"};return a.augment(e,a.EventTarget,{_init:function(b,c){var d=this,c=a.merge(g,c),e=d._readConfig(b,c);if(b.ifSVG){var h=document.createElementNS("http://www.w3.org/2000/svg","rect");f(h).attr("x",e.x).attr("y",e.y).attr("width",c.width).attr("height",c.height).attr("stroke",c.borderColor).attr("stroke-width",c.borderWidth).attr("fill",c.backgroundColor),b.config.mapNode.append(h),d.thisNode=f(h)}else{var h=document.createElement("v:rect");f(h).attr("filled",!0).attr("fillcolor",c.backgroundColor).attr("strokeweight",.7*c.borderWidth).attr("strokecolor",c.borderColor).css({position:"absolute",top:e.y,left:e.x,width:c.width,height:c.width}),b.config.mapNode.append(h),d.thisNode=f(h)}},_readConfig:function(a,b){var c,d,e=a.config.mapNode.width(),f=a.config.mapNode.height();return-9999!=b.top&&-9999!=b.left?(c=b.left,d=b.top):-9999!=b.top&&-9999!=b.right?(c=e-b.right-b.width,d=b.top):-9999!=b.bottom&&-9999!=b.left?(c=b.left,d=f-b.bottom-b.height):-9999!=b.bottom&&-9999!=b.right&&(c=e-b.right-b.width,d=f-b.bottom-b.height),{x:c,y:d}}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/painting/ellipse",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}var f=d.all,g={top:-9999,left:-9999,right:-9999,bottom:-9999,width:0,height:0,backgroundColor:"transparent",borderWidth:0,borderColor:"transparent"};return a.augment(e,a.EventTarget,{_init:function(b,c){var d=this,c=a.merge(g,c),e=d._readConfig(b,c);if(b.ifSVG){var h=document.createElementNS("http://www.w3.org/2000/svg","ellipse");f(h).attr("cx",e.x).attr("cy",e.y).attr("rx",c.width/2).attr("ry",c.height/2).attr("stroke",c.borderColor).attr("stroke-width",c.borderWidth).attr("fill",c.backgroundColor),b.config.mapNode.append(h),d.thisNode=f(h)}else{var i=document.createElement("v:oval");f(i).attr("arcsize",c.width).attr("stroked",!0).attr("strokecolor",c.borderColor).attr("strokeweight",.8*c.borderWidth).attr("fillcolor",c.backgroundColor).css({position:"absolute",top:e.y-c.height/2,left:e.x-c.width/2,width:c.width,height:c.height,antialias:!0}),b.config.mapNode.append(i),d.thisNode=f(i)}},_readConfig:function(a,b){var c,d,e=a.config.mapNode.width(),f=a.config.mapNode.height();return-9999!=b.top&&-9999!=b.left?(c=b.left+b.width/2,d=b.top+b.width/2):-9999!=b.top&&-9999!=b.right?(c=e-b.right-b.width/2,d=b.top+b.width/2):-9999!=b.bottom&&-9999!=b.left?(c=b.left+b.width/2,d=f-b.bottom-b.height/2):-9999!=b.bottom&&-9999!=b.right&&(c=e-b.right-b.width/2,d=f-b.bottom-b.height/2),{x:c,y:d}}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/painting/polygon",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}var f=d.all,g={top:-9999,left:-9999,right:-9999,bottom:-9999,points:"",backgroundColor:"transparent",borderWidth:0,borderColor:"transparent"};return a.augment(e,a.EventTarget,{_init:function(b,c){var d=this,c=a.merge(g,c);if(b.ifSVG){var e=document.createElementNS("http://www.w3.org/2000/svg","polygon");f(e).attr("points",c.points).attr("stroke",c.borderColor).attr("stroke-width",c.borderWidth).attr("fill",c.backgroundColor),b.config.mapNode.append(e),d.thisNode=f(e)}else{var h=document.createElement("v:polyLine");c.points=c.points+" "+c.points.split(" ")[0],f(h).attr("points",c.points).attr("filled",!0).attr("fillcolor",c.backgroundColor).attr("strokeweight",.8*c.borderWidth).attr("strokecolor",c.borderColor).css({position:"absolute",top:0,left:0}),b.config.mapNode.append(h),d.thisNode=f(h)}},_readConfig:function(b,c){var d,e;b.config.mapNode.width(),b.config.mapNode.height();var f=c.points.split(" "),g="";return a.each(f,function(a,b){var f=a.split(",");f[0]=parseInt(f[0]),f[1]=parseInt(f[1]),-9999!=c.top&&-9999!=c.left?(d=f[0]+c.left,e=f[1]+c.top):-9999!=c.top&&-9999!=c.right?(d=f[0]-c.right,e=f[1]+c.top):-9999!=c.bottom&&-9999!=c.left?(d=f[0]+c.left,e=f[1]-c.bottom):-9999!=c.bottom&&-9999!=c.right&&(d=f[0]-c.right,e=f[1]-c.bottom),g+=0==b?d+","+e:" "+d+","+e}),g}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/painting/path",function(a,b,c,d){function e(a,b){var c=this;c._init(a,b)}var f=d.all,g={path:"",backgroundColor:"transparent",borderWidth:0,borderColor:"transparent"};return a.augment(e,a.EventTarget,{_init:function(b,c){var d=this,c=a.merge(g,c);if(b.ifSVG){var e=document.createElementNS("http://www.w3.org/2000/svg","path");c.path=c.path.replace(/X/,"Z").replace(/qb/,"Q"),f(e).attr("d",c.path).attr("stroke",c.borderColor).attr("stroke-width",c.borderWidth).attr("fill",c.backgroundColor),b.config.mapNode.append(e),d.thisNode=f(e)}else{var h=document.createElement("v:shape");c.path=c.path.replace(/Z/,"X").replace(/Q/,"qb"),f(h).attr("path",c.path).attr("filled",!0).attr("fillcolor",c.backgroundColor).attr("strokeweight",.8*c.borderWidth).attr("strokecolor",c.borderColor).attr("CoordSize",b.config.mapNode.width()+","+b.config.mapNode.height()).css({position:"absolute",top:0,left:0,width:b.config.mapNode.width(),height:b.config.mapNode.height()}),b.config.mapNode.append(h),d.thisNode=f(h)}}}),e},{requires:["event","dom","node"]}),KISSY.add("kg/brush/2.0.0/index",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){var b=this;n.superclass.constructor.call(b,{}),p.config.mapNode=o(a);var c=document.documentMode||f.ie;9>c&&(p.ifSVG=!1)}var o=d.all,p={ifSVG:!0,config:{}};return a.extend(n,b,{usePaper:function(a){return new g(p,a),p.config.mapNode=p.ifSVG?o(p.config.mapNode.children("svg")[0]):o(p.config.mapNode.children("div")[0]),p.config.mapNode},draw:{line:function(a){var b=new i(p,a);return b.thisNode},circle:function(a){var b=new h(p,a);return b.thisNode},rect:function(a){var b=new j(p,a);return b.thisNode},ellipse:function(a){var b=new k(p,a);return b.thisNode},polygon:function(a){var b=new l(p,a);return b.thisNode},path:function(a){var b=new m(p,a);return b.thisNode}}},{ATTRS:{}}),n},{requires:["base","dom","node","event","ua","./painting/map","./painting/circle","./painting/line","./painting/rect","./painting/ellipse","./painting/polygon","./painting/path"]});